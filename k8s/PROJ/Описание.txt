
Есть высоконагруженный сервис А, который обрабатывает данные со скоростью ~150 000 - 280 000 записей в секунду

необходимо обогатить записи

но есть одна проблема, справочник по обогащению  слишком большой 25 гб

есть теория, что переложив данный справочник в графовую бд, можно получить распределенный источник информации

справочник состоит из записей, первая совпадает с записью которая приходит в сервис, все остальные являются данными по обогащению

пример

mozilla/5.0 (linux; android 9; h4113) applewebkit/537.36 (khtml, like gecko) chrome/98.0.4758.101 mobile safari/537.36
mozilla/5.0 (linux; arm_64; android 11; m2103k19pg) applewebkit/537.36 (khtml, like gecko) chrome/108.0.0.0 yabrowser/23.1.0.330.00 sa/3 mobile safari/537.36

т.к. в записях есть повторы информации, было принято решение разделить записи по пробелам, исключаяя пробелы в скобках (скобки оставляем неизменными) 

получилось n вершин:
1 - mozilla/5.0 
2 - (linux; android 9; h4113) 
3 - applewebkit/537.36 
4 - (khtml, like gecko) 
5 - chrome/98.0.4758.101 
6 - mobile 
7 - safari/537.36
  
к последней крепим инфо по обогащению

после развертывания и наполнения БД , поднимаем сервис и запускаем нагрузочное тестирование яндекс танком

в результате тестирования получаем 120 FPS и стабильную работу

при попытке скейлом масштабировать сервис, кубик уже не вывозит (15 подов сервиса и 6 подов бд)
kubectl -n ddk scale --replicas=7 deployment.apps/app-simple-ws

итог: бд положить не удалось, первым свалился клиент, следовательно есть потенциал для дальнейших тестов
  